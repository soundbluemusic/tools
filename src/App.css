/* ==========================================================================
   Performance-Optimized CSS
   - GPU acceleration with transform3d
   - Optimized animations using transform/opacity only
   - CSS containment for layout isolation
   - will-change hints for animated elements
   ========================================================================== */

/* ============================================
   CSS Variables Mapping - Links to design system
   These map legacy variable names to the new premium design tokens
   ============================================ */
:root {
  /* Background colors - Premium light theme */
  --bg-color: var(--color-bg-tertiary);
  --text-color: var(--color-text-primary);
  --border-color: var(--color-border-primary);
  --item-hover-bg: var(--color-interactive-hover);
  --search-bg: var(--color-bg-secondary);
  --search-border: var(--color-border-primary);
  --skeleton-bg: var(--color-skeleton);

  /* Premium additions */
  --accent-color: var(--color-accent-primary);
  --accent-hover: var(--color-accent-hover);
  --accent-glow: var(--shadow-glow);
  --card-shadow: var(--shadow-card);
  --card-shadow-hover: var(--shadow-card-hover);

  /* GPU layer creation */
  --gpu-transform: translateZ(0);
}

/* Dark mode - Inherits from design system automatically */
@media (prefers-color-scheme: dark) {
  :root {
    --bg-color: var(--color-bg-tertiary);
    --text-color: var(--color-text-primary);
    --border-color: var(--color-border-primary);
    --item-hover-bg: var(--color-interactive-hover);
    --search-bg: var(--color-bg-elevated);
    --search-border: var(--color-border-primary);
    --skeleton-bg: var(--color-skeleton);
  }
}

/* Base styles */
#root {
  width: 100%;
  min-height: 100vh;
  min-height: 100dvh; /* Dynamic viewport height for mobile */
  /* Note: Do NOT add transform here - it breaks position: fixed for sidebar/header */
}

/* ==========================================================================
   View Transitions API Support
   ========================================================================== */

@supports (view-transition-name: none) {
  /* Only animate the main content area, not root */
  ::view-transition-old(main-content),
  ::view-transition-new(main-content) {
    animation-duration: 0.12s;
    animation-timing-function: ease-out;
  }

  ::view-transition-old(main-content) {
    animation-name: page-exit;
  }

  ::view-transition-new(main-content) {
    animation-name: page-enter;
  }

  /* Disable root transition to prevent footer/header from animating */
  ::view-transition-old(root),
  ::view-transition-new(root) {
    animation: none;
  }

  @keyframes page-exit {
    from {
      opacity: 1;
    }
    to {
      opacity: 0;
    }
  }

  @keyframes page-enter {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }
}

/* ==========================================================================
   Reduced Motion - Accessibility
   ========================================================================== */
@media (prefers-reduced-motion: reduce) {
  .tool-page,
  .home-page {
    animation: none;
  }
}
